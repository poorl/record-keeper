<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Create record</title>
  <!-- Tell the browser to be responsive to screen width -->
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <!-- Bootstrap 3.3.6 -->
  <link rel="stylesheet" href="./bootstrap/css/bootstrap.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
  <!-- DataTables -->
  <link rel="stylesheet" href="./plugins/datatables/dataTables.bootstrap.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="./dist/css/AdminLTE.min.css">
  <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
  <link rel="stylesheet" href="./dist/css/skins/_all-skins.min.css">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
  <!-- jQuery 2.2.3 -->
  <script src="./plugins/jQuery/jquery-2.2.3.min.js"></script>
  <!-- Bootstrap 3.3.6 -->
  <script src="./bootstrap/js/bootstrap.min.js"></script>
  <!-- ChartJS 1.0.1 -->
  <script src="./plugins/chartjs/Chart.min.js"></script>
  <!-- DataTables -->
  <script src="./plugins/datatables/jquery.dataTables.min.js"></script>
  <script src="./plugins/datatables/dataTables.bootstrap.min.js"></script>
  <!-- SlimScroll -->
  <script src="./plugins/slimScroll/jquery.slimscroll.min.js"></script>
  <!-- FastClick -->
  <script src="./plugins/fastclick/fastclick.js"></script>
  <!-- AdminLTE App -->
  <script src="./dist/js/app.min.js"></script>
  <!-- AdminLTE for demo purposes -->
  <script src="./dist/js/demo.js"></script>
  <!-- page script -->
</head>
<body>
    <div id="create-content" class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="aobPointsModalLabel">Create Record</h4>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Borrower</label>
                    <div class="input-group">
                        <span class="input-group-addon"><i class="fa fa-user-md"></i></span>
                        <input type="text" id="borrower" class="form-control" value="" placeholder="Borrower Name">
                    </div>
                </div>
                <div class="form-group">
                    <label>Agreement Date</label>
                    <div class="input-group">
                        <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                        <input type="text" id="agreementDate" class="form-control" value="" placeholder="DD/MM/YYYY">
                    </div>
                </div>
                <div class="form-group">
                    <label>Client Description</label>
                    <div class="input-group">
                        <span class="input-group-addon"><i class="fa fa-info"></i></span>
                        <input type="text" id="clientDescription" class="form-control" value="" placeholder="Client Description">
                    </div>
                </div>
                <div class="form-group">
                    <label>CLTA Role(s)</label>
                    <div class="input-group">
                        <span class="input-group-addon"><i class="fa fa-rub"></i></span>
                        <input type="text" id="roles" class="form-control" value="" placeholder="role">
                    </div>
                </div>
                <div class="form-group">
                    <label>Legal counsel</label>
                    <div class="input-group">
                        <span class="input-group-addon"><i class="fa fa-bullseye"></i></span>
                        <input type="text" id="legalCounsel" class="form-control" value="" placeholder="Legal counsel">
                    </div>
                </div>
                <div class="form-group">
                    <label>Description of documents</label>
                    <div class="input-group">
                        <span class="input-group-addon"><i class="fa fa-inbox"></i></span>
                        <input type="text" id="docDescription" class="form-control" value="" placeholder="Description of documents">
                    </div>
                </div>
                <div class="form-group">
                    <label>Original / CTC</label>
                    <div class="input-group">
                        <span class="input-group-addon"><i class="fa fa-headphones"></i></span>
                        <input type="text" id="originalCTC" class="form-control" value="" placeholder="Original / CTC">
                    </div>
                </div>
                <div class="form-group">
                    <label>No. of copies</label>
                    <div class="input-group">
                        <span class="input-group-addon"><i class="fa fa-copy"></i></span>
                        <input type="text" id="numCopies" class="form-control" value="" placeholder="No. of copies">
                    </div>
                </div>
                <div class="form-group">
                    <label>Doc Receipt Date</label>
                    <div class="input-group">
                        <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                        <input type="text" id="receiveDate" class="form-control" value="" placeholder="Doc Receipt Date">
                    </div>
                </div>
                <div class="form-group">
                    <label>Location</label>
                    <div class="input-group">
                        <span class="input-group-addon"><i class="fa fa-map"></i></span>
                        <input type="text" id="location" class="form-control" value="" placeholder="location">
                    </div>
                </div>
                <div class="form-group">
                    <label>Remarks</label>
                    <div class="input-group">
                        <span class="input-group-addon"><i class="fa fa-info"></i></span>
                        <input type="text" id="remarks" class="form-control" value="" placeholder="Remarks">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" onclick="clearRecord()">Clear</button>
                <button type="button" class="btn btn-primary" onclick="submitRecord()">Submit</button>
            </div>
        </div>
    </div>

    <div id="qr-content">
      <div id="qr-code" class="wrapper" style="visibility:hidden">
        <img id="qr-code-url" src="" />
        <span onClick="this.innerText='';window.print();this.innerText='Print'" style="cursor:pointer; text-align:center">Print</span>
      </div>
    </div>
<script>

  var loadingOverlay1 = $('<div class="overlay"><div class="fa fa-refresh fa-spin"></div></div>');

  function submitRecord() {
    $('#qr-content').append(loadingOverlay1);

    var idList = [
      "borrower",
      "agreementDate",
      "clientDescription",
      "roles",
      "legalCounsel",
      "docDescription",
      "numCopies",
      "receiveDate",
      "location",
      "originalCTC",
      "remarks"
    ];

    var jsonDataString = {};

    for (var i=0; i < idList.length; i++) {
      jsonDataString[idList[i]] = document.getElementById(idList[i]).value;
    }

    $.ajax({
      //type: 'POST',
      data: JSON.stringify(jsonDataString),
      // url: "data url",
      url: "./data/doc-record.json",
      success: function (data) {
        console.log("SUCCESS: ", data);

        $('#qr-code-url').attr("src", "https://chart.googleapis.com/chart?cht=qr&chs=150x150&chl=https://composed-task-186614.appspot.com/load-record.html?id="+data.id);

        $('#create-content').attr("style","display:none;visibility:hidden");
        $('#qr-code').attr("style","visibility:show");

        $('#qr-content').find(loadingOverlay1).remove();

      }
    });
  }


</script>

</body>
</html>
